---
ID: 194
post_title: 11种方法给magento 加速
author: chris
post_excerpt: ""
layout: post
permalink: 'http://hss5.com/2013/08/31/11%e7%a7%8d%e6%96%b9%e6%b3%95%e7%bb%99magento-%e5%8a%a0%e9%80%9f/'
published: true
post_date: 2013-08-31 06:22:55
---
<p>1、安装Fooman Speedster插件<br>插件官方地址：<a href="http://www.magentocommerce.com/magento-connect/FOOMAN/extension/457/fooman-speedster">http://www.magentocommerce.com/m ... 57/fooman-speedster</a><br>这款插件主要通过合并、压缩js和CSS来加速，不知道这个和使用Magento自带的合并功能有什么区别。<br>2、在.htaccess中开启Gzip压缩<br>在.htaccess的52行左右的位置移除#号 <p>1. #php_flag zlib.output_compression on <p>复制代码 <p>将以下.htaccess <p>1. ############################################ <p>2. ## enable apache served files compression <p>3. ## http://developer.yahoo.com/performance/rules.html#gzip <p>4.&nbsp; <p>5.&nbsp;&nbsp;&nbsp;&nbsp; # Insert filter <p>6.&nbsp;&nbsp;&nbsp;&nbsp; #SetOutputFilter DEFLATE <p>7.&nbsp; <p>8.&nbsp;&nbsp;&nbsp;&nbsp; # Netscape 4.x has some problems... <p>9.&nbsp;&nbsp;&nbsp;&nbsp; #BrowserMatch ^Mozilla/4 gzip-only-text/html <p>10.&nbsp; <p>11.&nbsp;&nbsp;&nbsp;&nbsp; # Netscape 4.06-4.08 have some more problems <p>12.&nbsp;&nbsp;&nbsp;&nbsp; #BrowserMatch ^Mozilla/4\.0[678] no-gzip <p>13.&nbsp; <p>14.&nbsp;&nbsp;&nbsp;&nbsp; # MSIE masquerades as Netscape, but it is fine <p>15.&nbsp;&nbsp;&nbsp;&nbsp; #BrowserMatch \bMSIE !no-gzip !gzip-only-text/html <p>16.&nbsp;&nbsp;&nbsp;&nbsp; # Don't compress images <p>17.&nbsp;&nbsp;&nbsp;&nbsp; #SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary <p>18.&nbsp; <p>19.&nbsp;&nbsp;&nbsp;&nbsp; # Make sure proxies don't deliver the wrong content <p>20.&nbsp;&nbsp;&nbsp;&nbsp; #Header append Vary User-Agent env=!dont-vary <p>21.&nbsp; <p>22. &lt;/IfModule&gt; <p>复制代码 <p>把一些#号去掉 <p>1. ############################################ <p>2. ## enable apache served files compression <p>3. ## http://developer.yahoo.com/performance/rules.html#gzip <p>4.&nbsp; <p>5.&nbsp;&nbsp;&nbsp;&nbsp; # Insert filter <p>6.&nbsp;&nbsp;&nbsp; SetOutputFilter DEFLATE <p>7.&nbsp; <p>8.&nbsp;&nbsp;&nbsp;&nbsp; # Netscape 4.x has some problems... <p>9.&nbsp;&nbsp;&nbsp;&nbsp; BrowserMatch ^Mozilla/4 gzip-only-text/html <p>10.&nbsp; <p>11.&nbsp;&nbsp;&nbsp;&nbsp; # Netscape 4.06-4.08 have some more problems <p>12.&nbsp;&nbsp;&nbsp; BrowserMatch ^Mozilla/4\.0[678] no-gzip <p>13.&nbsp; <p>14.&nbsp;&nbsp;&nbsp;&nbsp; # MSIE masquerades as Netscape, but it is fine <p>15.&nbsp;&nbsp; BrowserMatch \bMSIE !no-gzip !gzip-only-text/html <p>16.&nbsp;&nbsp;&nbsp;&nbsp; # Don't compress images <p>17.&nbsp;&nbsp;&nbsp;&nbsp; SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary <p>18.&nbsp; <p>19.&nbsp;&nbsp;&nbsp;&nbsp; # Make sure proxies don't deliver the wrong content <p>20.&nbsp;&nbsp;&nbsp;&nbsp; Header append Vary User-Agent env=!dont-vary <p>21.&nbsp; <p>22. &lt;/IfModule&gt; <p>复制代码 <p>3、安装 APC or Xcache<br>APC - <a href="http://pecl.php.net/package/APC">http://pecl.php.net/package/APC</a><br>Xcache - <a href="http://xcache.lighttpd.net/">http://xcache.lighttpd.net/</a><br>apc使add to cart两秒内加载的方法<br>在你安装激活apc之后，找到app/etc/local.xml 文件<br>在&lt;global&gt;下添加如下block <p>1. &lt;global&gt; <p>2. .................... <p>3. &lt;cache&gt; <p>4. &lt;backend&gt;apc&lt;/backend&gt; <p>5. &lt;prefix&gt;alphanumeric&lt;/prefix&gt; <p>6. &lt;/cache&gt; <p>7. ...................... <p>8.&nbsp; <p>复制代码 <p>以上需要注意的是如果你的服务器有超过一个Magento程序，apc在缓存上会有一些混乱<br>可以试着使每个Magento网站&lt;prefix&gt;alphanumeric&lt;/prefix&gt;内容不同<br>第一个网站&lt;prefix&gt;siteA&lt;/prefix&gt;<br>第二个网站&lt;prefix&gt;siteB&lt;/prefix&gt;<br>提速的重点在于成功安装apc<br>4、修改Mysql服务器的配置好好利用服务器的内存<br>绝大部分Linux发行版提供一个保守的mysql包来确保能运行在大范围的硬件上。如果你有足够的内存（比如，1gb或者更多)，接着你可能会想调整设置。一个my.cnf的示例如下， <p>1. key_buffer = 512M <p>2. max_allowed_packet = 64M <p>3. table_cache = 512 <p>4. sort_buffer_size = 4m <p>5. read_buffer_size = 4m <p>6. read_rnd_buffer_size = 2m <p>7. myisam_sort_buffer_size = 64m <p>8. tmp_table_size = 128m <p>9. query_cache_size = 96m <p>10. query_cache_type = 1 <p>11. thread_cache_size = 8 <p>12. max_connections = 400 <p>13. wait_timeout = 300 <p>复制代码 <p>5、Magento缓存<br>转到Magento admin-&gt;system-&gt;Cache management<br>选中以下条目：<br>-- Configuration<br>-- Layouts<br>-- Block HTML output<br>-- Translations <br>以下条目就不用选中了<br>-- Collections Data<br>-- EAV types and attributes<br>-- Web Services Configuration <br><a name="OLE_LINK2"></a><a name="OLE_LINK3">6、开启编译</a><br>转到<a name="OLE_LINK1">System &gt; Tools &gt; Compilation</a>，报道称能给你提速25%-50%。<br>7、使用cdn加速<br>你可以使用Magento插件来帮助你<br><a href="http://www.magentocommerce.com/magento-connect/One+Pica/extension/1279/one-pica-image-cdn">http://www.magentocommerce.com/magento-connect/One+Pica/extension/1279/one-pica-image-cdn</a><br>其他关于前端模板代码方面的优化如图片优化、使用CSS Sprite等论坛其他帖子。<br>以上方法整理来源于以下网站：<br><a href="http://www.magentocommerce.com/boards/viewthread/36225/">http://www.magentocommerce.com/boards/viewthread/36225/</a><br><a href="http://www.gxjansen.com/101-ways-to-speed-up-your-magento-e-commerce-website/">http://www.gxjansen.com/101-ways-to-speed-up-your-magento-e-commerce-website/</a><br>8. 将magento的var目录挂载到内存中，加快读取速度，如<br>mount -t tmpfs -o size=100M,mode=0777 tmpfs var<br>9. 打开apache的KeepAlives，可以让多个请求使用一个TCP连接，加快速度<br>修改/etc/httpd/conf/httpd.conf： KeepAlive On<br>10. Magento1.5中可以开启CSS和JS合并<br>SYSTEM -&gt; CONFIGURATION / ADVANCED -&gt; DEVELOPER<br>enable<br>Merge JavaScript Files set to Yes<br>Merge CSS Files set to Yes<br>11. 增加PHP Memory Limit<br>如果2G内存，可以通过修改php.ini 将memory_limit设置为128MB</p>