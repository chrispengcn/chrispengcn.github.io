---
ID: 253
post_title: >
  VMware 桥接无法启用 及
  VMware的网卡各连接方式说明
author: chris
post_excerpt: ""
layout: post
permalink: 'http://hss5.com/2013/09/01/vmware-%e6%a1%a5%e6%8e%a5%e6%97%a0%e6%b3%95%e5%90%af%e7%94%a8-%e5%8f%8a-vmware%e7%9a%84%e7%bd%91%e5%8d%a1%e5%90%84%e8%bf%9e%e6%8e%a5%e6%96%b9%e5%bc%8f%e8%af%b4%e6%98%8e/'
published: true
post_date: 2013-09-01 02:12:41
---
<p>之前用vmware在虚拟机学习Linux，没尝试连接。最近用WIN2003连接虚拟机测试服务器的时候，局域网总无法连接。  <p>打开虚拟机，虚拟机右下角，网卡状态断开，用桥接无法连接，报错： <p>"The network bridge on device VMnet0 is not running.The virtual machine will not<br>be able to communicate with the host or with other machines on your network.<br>Virtual device Ethernet0 will start disconnected." <p>出现问题原因： <p>VMnet1 少了：VMware Bridge Protocol服务 <p>解决办法： <p>打开“网络连接”，选择VMnet1 属性，检查是否有VMware Bridge Protocol服务，如果没有安装如下的方法添加，如果有可以卸载了，再重新添加一次。<br>1、在"VMware Network Adapter VMnet1属性"中,点"安装"-&gt;"服务"-&gt;"添加..."-&gt;厂商中选择"VMware,Inc",网络服务中选择"VMware Bridge Protocol 版本:4.0.0.0 [2004-8-5]"-&gt;"从磁盘安装..."-&gt;"浏览"-&gt;C:\Program Files\VMware\VMware Workstation\netbridge.inf(这里选你自己安装目录下的)-&gt;"打开"<br>2、打开"VMware"程序—— "Manage Virtual Networks",打开"Host Virtual Network Mapping"标签页，设置VMnet0为"Bridged to an automatically chosen adapter"，在Automatic Bridging标签页，选中"Automatically choose an available physical network adapter to bridge to VMnet0"，Excluded adapters保持空。<br>3、重启VMnet1网卡。如果无效，也可以重新启动系统。<br>4、确认虚拟机网卡设置为Bridged模式，并启动虚拟机，故障排除。 <p>主机不想改物理网卡的设置，可添加虚拟网卡连接虚拟机，方法如下 <p>1、打开 “控制面板”，选择“添加删除硬件”打开，等待搜索完毕后，选择“添加新设备”打开，然后选择“否，我想从列表中选择硬件”，之后选择“网卡”打开，在制造商框内找到“Microsoft”，然后点击选中右边的“Microsoft Loopback Adapter”，点击下一步安装虚拟网卡。<br>3、设置环回网卡：IP地址为：192.168.0.X 子网掩码：255.255.255.0 其余设置不用管。关闭防火墙。这里X为0－255任意值，我测试时设置的是192.168.0.3。<br>4、在虚拟机中设置网卡为桥连，设置IP地址为：192.168.0.X 子网掩码：255.255.255.0 其余设置不用管。关闭防火墙。这里X为0－255任意值，但不能与主机中的相同，我测试时设置的是：192.168.0.6 <p>用虚拟机组建局域网的关键是：<br>1、主机和虚拟机的“工作组名”要一致。<br>2、IP地址在同一地址段。<br>3、关闭防火墙，或在防火墙中设置让局域网能够通过。 <p><img alt="VMware 桥接无法启用 及 VMware的网卡各连接方式说明 - 清风星缘 - 清风星缘（通信郎）" src="http://img.ph.126.net/GeA-qKOLIoOyBZ5DJIA8Ng==/3261169080170896161.jpg"> <p> 主机端：安装VMware后自动生成VMnet1、VMnet8，本地连接是被禁用的物理网卡，本地连接2是虚拟网卡。<br>VMware的“桥接”、“NAT”、“Host-only”连接方式区别默认分类<br>在说到VMware的网络模型之前，先说一下VMware的几个虚拟设备：<br>VMnet0：这是VMware用于虚拟桥接网络下的虚拟交换机；<br>VMnet1：这是VMware用于虚拟Host-Only网络下的虚拟交换机；<br>VMnet8：这是VMware用于虚拟NAT网络下的虚拟交换机；<br>VMware Network Adapter VMnet1：这是Host用于与Host-Only虚拟网络进行通信的虚拟网卡；<br>VMware Network Adapter VMnet8：这是Host用于与NAT虚拟网络进行通信的虚拟网卡； <p>一、桥接网络：<br>可将虚拟机模拟接入主机所在的局域网。 <p>二、nat网络：<br>在NAT网络中，会使用到VMnet8虚拟交换机，Host上的 VMware Network Adapter VMnet8虚拟网卡被连接到VMnet8交换机上，来与Guest进行通信，但是VMware Network Adapter VMnet8虚拟网卡仅仅是用于和VMnet8网段通信用的，它并不为VMnet8网段提供路由功能，处于虚拟NAT网络下的Guest是使用虚拟的 NAT服务器连接的Internet的。 <p>这时候，你的Guest和Host就可以实现互访了，并且如果你的Host此时已经连接到了 Internet，那么你的Guest也就可以连上Internet了。那么VMware Network Adapter VMnet8虚拟网卡在这里扮演了一个什么角色呢？它仅仅是为Host和NAT虚拟网络下的Guest通信提供一个接口，所以，即便Disable掉这块虚拟网卡，Guest仍然是可以上网的，只是Host无法再访问VMnet8网段而已。 <p>这种方式的时候，主机必须开启vmnat服务，而vmdhcp服务可根据需要开启。 <p>三、host-only<br>在Host-Only网络中，Host-Only网络被用来设计成一个与外界隔绝的网络，其实Host-Only网络和NAT网络非常相似，唯一不同的地方就是在Host-Only网络中，没有用到NAT 服务，没有服务器为VMnet1做路由，它当然就没有办法访问Internet啦，可是如果我的Host要和Guest通信呢？怎么办？对了！当然就要用到VMware Network Adapter VMnet1这块虚拟网卡了。 <p>可以看到，在Host-Only网络下，Guest的Default Gateway被设置为NULL，这是由于没有使用虚拟NAT服务器的缘故，但是，即便使用route add命令加上某个地址做它的路由，它仍然不能访问Internet（实际上也没有地址可加）。这样，我的Guest虽然没有办法访问Internet，但是仍然可以和我的Host进行通信： <p>事实上，如果我们足够BT，也可以在Host上来为VMware Network Adapter VMnet1虚拟网卡来做路由，比如，我们可以用Windows 2000的RRAS来做，这样的话，处于Host-Only网络下的Guest就又可以上网了，他们只需要使用route add命令把自己的Default Gateway改成VMware Network Adapter VMnet1网卡即可，不过这样不推荐，也没有必要。