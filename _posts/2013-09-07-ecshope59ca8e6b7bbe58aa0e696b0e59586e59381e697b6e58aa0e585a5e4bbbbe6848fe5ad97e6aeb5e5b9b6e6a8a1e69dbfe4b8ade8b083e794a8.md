---
ID: 301
post_title: >
  ecshop在添加新商品时加入任意字段并模板中调用
author: chris
post_excerpt: ""
layout: post
permalink: 'http://hss5.com/2013/09/07/ecshop%e5%9c%a8%e6%b7%bb%e5%8a%a0%e6%96%b0%e5%95%86%e5%93%81%e6%97%b6%e5%8a%a0%e5%85%a5%e4%bb%bb%e6%84%8f%e5%ad%97%e6%ae%b5%e5%b9%b6%e6%a8%a1%e6%9d%bf%e4%b8%ad%e8%b0%83%e7%94%a8/'
published: true
post_date: 2013-09-07 15:13:45
---
<h4>&nbsp;</h4> <p>ecshop在添加新商品时加入任意字段并模板中调用 <p>1.ecshop数据库新增一个字段 <p>可以用mysql语句，也可以用phpmyadmin或其它数据库管理工具增加ecshop字段 <p>2.修改admin/good.php <p>查找 $shop_price = !empty($_POST['shop_price']) ? $_POST['shop_price'] : 0; <p>在下面添加 <p>$goods_profit = !empty($_POST['goods_profit']) ? $_POST['goods_profit'] : 0; <p>查找 if ($is_insert) <p>在4处地方加入SQL的插入。 <p>我插入后的语句 <p>if ($is_insert)<br>{<br>if ($code == '')<br>{<br>$sql = "INSERT INTO " . $ecs-&gt;table('goods') . " (goods_name, goods_name_style, goods_sn, " .<br>"cat_id, brand_id, shop_price, market_price, is_promote, promote_price, " .<br>"promote_start_date, promote_end_date, goods_img, goods_thumb, original_img, keywords, goods_brief, " .<br>"seller_note, goods_weight, goods_profit, goods_number, warn_number, integral, give_integral, is_best, is_new, is_hot, " .<br>"is_on_sale, is_alone_sale, is_shipping, goods_desc, add_time, last_update, goods_type, rank_integral, suppliers_id)" .<br>"VALUES ('$_POST[goods_name]', '$goods_name_style', '$goods_sn', '$catgory_id', " .<br>"'$brand_id', '$shop_price', '$market_price', '$is_promote','$promote_price', ".<br>"'$promote_start_date', '$promote_end_date', '$goods_img', '$goods_thumb', '$original_img', ".<br>"'$_POST[keywords]', '$_POST[goods_brief]', '$_POST[seller_note]', '$goods_weight', '$goods_profit', '$goods_number',".<br>" '$warn_number', '$_POST[integral]', '$give_integral', '$is_best', '$is_new', '$is_hot', '$is_on_sale', '$is_alone_sale', $is_shipping, ".<br>" '$_POST[goods_desc]', '" . gmtime() . "', '". gmtime() ."', '$goods_type', '$rank_integral', '$suppliers_id')";<br>}<br>else<br>{<br>$sql = "INSERT INTO " . $ecs-&gt;table('goods') . " (goods_name, goods_name_style, goods_sn, " .<br>"cat_id, brand_id, shop_price, market_price, is_promote, promote_price, " .<br>"promote_start_date, promote_end_date, goods_img, goods_thumb, original_img, keywords, goods_brief, " .<br>"seller_note, goods_weight, goods_profit, goods_number, warn_number, integral, give_integral, is_best, is_new, is_hot, is_real, " .<br>"is_on_sale, is_alone_sale, is_shipping, goods_desc, add_time, last_update, goods_type, extension_code, rank_integral)" .<br>"VALUES ('$_POST[goods_name]', '$goods_name_style', '$goods_sn', '$catgory_id', " .<br>"'$brand_id', '$shop_price', '$market_price', '$is_promote','$promote_price', ".<br>"'$promote_start_date', '$promote_end_date', '$goods_img', '$goods_thumb', '$original_img', ".<br>"'$_POST[keywords]', '$_POST[goods_brief]', '$_POST[seller_note]', '$goods_weight', '$goods_profit', '$goods_number',".<br>" '$warn_number', '$_POST[integral]', '$give_integral', '$is_best', '$is_new', '$is_hot', 0, '$is_on_sale', '$is_alone_sale', $is_shipping, ".<br>" '$_POST[goods_desc]', '" . gmtime() . "', '". gmtime() ."', '$goods_type', '$code', '$rank_integral')";<br>}<br>} <p>基本上就是在对应的goods_weight后面加入goods_profit 总共有4处 <p>查找 "goods_weight = '$goods_weight'," . <p>在下面加入 <p>"goods_profit = '$goods_profit',". <p>在后台添加新商品的地方加入商品利润 <p>找到 admintemplatesgoods_info.htm <p>在你想加入的地方添加 <p>&lt;tr&gt;<br>&lt;td class="label"&gt;商品利润：&lt;/td&gt;<br>&lt;td&gt;&lt;input type="text" name="goods_profit" value="{$goods.goods_profit}" size="20" /&gt;<br>&lt;/td&gt;<br>&lt;/tr&gt; <p>在模板中用{$goods.goods_profit} 来调用，我们一般再good.dwt里面调用 <p>后台商品列表页显示这个字段请看我下一篇文章，并可以ajax修改